%test6sub.mpkg load imageL = imread('Lena.tiff');logo = imread('logo.bmp');logonew = imresize(logo,2.56);logobi = im2bw(logonew);watermark = [logobi logobi logobi logobi;logobi logobi logobi logobi;logobi logobi logobi logobi;logobi logobi logobi logobi;];B = L(:,:,3);B_wa = bitset(B,1,watermark);newL = L;newL(:,:,3) = B_wa;psnr_val = psnr(L,newL);imwrite(newL,'Lena_j.jpg','Quality',100)J = imread('Lena_j.jpg');B = J(:,:,3);B_ex = bitget(B,1);corr2(B_ex,watermark);figuresubplot(1,3,1);imshow(B_wa);title('LSB')subplot(1,3,2);imshow(newL);title(['LSB','PSNR:',num2str(psnr_val)])subplot(1,3,3);imshow(B_ex,[]);title('watermark1')for x = 2:8%for i =1:8%  B_bi_1 = bitget(B,i);%  figure;imshow(B_bi_1,[])%endforB = L(:,:,3);B_wa = bitset(B,x,watermark);newL = L;newL(:,:,3) = B_wa;psnr_val = psnr(L,newL);imwrite(newL,'Lena_j.jpg','Quality',100)J = imread('Lena_j.jpg');B = J(:,:,3);B_ex = bitget(B,x);corr2(B_ex,watermark);figure;subplot(1,3,1);imshow(B_wa);title('LSB')subplot(1,3,2);imshow(newL);title(['LSB','PSNR:',num2str(psnr_val)])subplot(1,3,3);imshow(B_ex,[]);title('watermark')endfor